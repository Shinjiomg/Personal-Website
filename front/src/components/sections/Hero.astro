---
import { BriefcaseIcon, RocketIcon, StarIcon } from "../assets/Icons";

const items = [
    {
        name: "3+",
        value: 3,
        suffix: "+",
        description: "A침os de experiencia",
        icon: BriefcaseIcon,
        color: "from-blue-500 to-cyan-500",
    },
    {
        name: "15+",
        value: 15,
        suffix: "+",
        description: "Proyectos completados",
        icon: RocketIcon,
        color: "from-primary to-blue-600",
    },
    {
        name: "100%",
        value: 100,
        suffix: "%",
        description: "Clientes satisfechos",
        icon: StarIcon,
        color: "from-yellow-500 to-orange-500",
    },
];

const techStack = ["Angular", "TypeScript", "Astro", "Tailwind CSS", "Node.js"];
---

<section id="home" class="relative py-20 min-h-screen flex items-center justify-center overflow-hidden">
    <!-- Subtle background effect -->
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_30%,rgba(59,130,246,0.08),transparent_50%)]"></div>
    
    <!-- Grid pattern overlay -->
    <div class="absolute inset-0 bg-[linear-gradient(to_right,#80808008_1px,transparent_1px),linear-gradient(to_bottom,#80808008_1px,transparent_1px)] bg-[size:24px_24px] opacity-30"></div>
    
    <div class="max-w-7xl mx-auto z-10 relative">
        <div class="text-center">
            <!-- Status badge -->
            <div class="relative inline-block mb-8 animate-fade-in group">
                <!-- Glow effect -->
                <div class="absolute -inset-1 bg-gradient-to-r from-primary via-blue-500 to-primary rounded-full opacity-20 blur-md group-hover:opacity-40 transition-opacity duration-300"></div>
                
                <!-- Badge container -->
                <div class="relative flex items-center gap-3 px-6 py-3 bg-gray-900 border-2 border-primary/50 rounded-full backdrop-blur-sm group-hover:border-primary transition-all duration-300 group-hover:shadow-lg group-hover:shadow-primary/30">
                    <!-- Animated pulse dot -->
                    <div class="relative flex-shrink-0">
                        <div class="absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"></div>
                        <div class="relative w-2.5 h-2.5 bg-green-500 rounded-full shadow-lg shadow-green-500/50"></div>
                    </div>
                    
                    <!-- Text -->
                    <span class="text-sm font-bold text-white tracking-wide whitespace-nowrap">
                        Disponible para trabajar
                    </span>
                    
                    <!-- Arrow icon -->
                    <svg class="w-4 h-4 text-primary flex-shrink-0 group-hover:text-white transition-all duration-300 transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                    </svg>
                </div>
            </div>

            <!-- Main heading -->
            <div class="mb-6">
                <h1 class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-bold mb-4">
                    <span class="block text-white mb-2">Hola, soy</span>
                    <span class="block text-primary">
                        Jhonatan Becerra
                    </span>
                </h1>
                <div class="mt-4">
                    <h2 class="text-2xl sm:text-3xl md:text-4xl font-semibold text-gray-300 inline-block">
                        Desarrollador
                        <span class="relative ml-3 text-primary">
                            Frontend
                            <span class="absolute -bottom-1 left-0 w-full h-0.5 bg-primary"></span>
                        </span>
                    </h2>
                </div>
            </div>

            <!-- Description -->
            <p class="mt-6 text-lg sm:text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
                Especializado en crear
                <span class="text-primary font-semibold">experiencias digitales excepcionales</span>
                que combinan dise침o elegante con c칩digo de alta calidad.
            </p>

            <!-- Tech stack pills -->
            <div class="mt-8 flex flex-wrap justify-center gap-3 max-w-7xl mx-auto">
                {techStack.map((tech) => (
                    <span class="px-4 py-2 bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-full text-sm text-gray-300 hover:border-primary/50 hover:text-primary transition-all duration-300">
                        {tech}
                    </span>
                ))}
            </div>

            <!-- CTA Buttons -->
            <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
                <a
                    href="#experience"
                    data-scroll
                    class="group relative px-8 py-4 bg-primary text-white rounded-xl font-semibold overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-primary/30 hover:scale-105"
                >
                    <span class="relative z-10 flex items-center justify-center gap-2">
                        Ver mi experiencia
                        <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                    </span>
                </a>
                <a
                    href="#projects"
                    data-scroll
                    class="group px-8 py-4 bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 text-white rounded-xl font-semibold hover:border-primary/50 hover:bg-gray-800 transition-all duration-300"
                >
                    <span class="flex items-center justify-center gap-2">
                        Ver proyectos
                        <svg class="w-5 h-5 transform group-hover:translate-y-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </span>
                </a>
            </div>

            <!-- Stats -->
            <div class="mt-12 grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-3xl mx-auto">
                {items.map((item, index) => {
                    const IconComponent = item.icon;
                    return (
                        <div 
                            class="group relative p-4 bg-gray-800/40 backdrop-blur-sm border border-gray-700/40 rounded-xl hover:border-primary/60 transition-all duration-500 hover:scale-105 hover:shadow-lg hover:shadow-primary/10"
                            style={`animation-delay: ${index * 0.1}s;`}
                        >
                            <!-- Gradient background on hover -->
                            <div class={`absolute inset-0 bg-gradient-to-br ${item.color} opacity-0 group-hover:opacity-10 rounded-xl transition-opacity duration-500`}></div>
                            
                            <!-- Content container -->
                            <div class="relative z-10 flex items-center gap-3">
                                <!-- Icon container -->
                                <div class={`flex-shrink-0 p-2 rounded-lg bg-gradient-to-br ${item.color} opacity-80 group-hover:opacity-100 transition-opacity`}>
                                    <IconComponent />
                                </div>
                                
                                <!-- Number and description -->
                                <div class="flex-1 min-w-0">
                                    <div class={`text-3xl md:text-4xl font-bold bg-gradient-to-r ${item.color} bg-clip-text text-transparent mb-0.5 group-hover:scale-105 transition-transform duration-300`}>
                                        <span class="counter-value" data-target={item.value} data-suffix={item.suffix}>0{item.suffix}</span>
                                    </div>
                                    <div class="text-gray-400 text-xs font-medium uppercase tracking-wide">
                                        {item.description}
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Decorative line -->
                            <div class={`absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r ${item.color} rounded-b-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500`}></div>
                        </div>
                    );
                })}
            </div>
        </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 group cursor-pointer" id="scroll-indicator">
        <div class="flex flex-col items-center gap-2 animate-bounce">
            <span class="text-xs text-gray-400 font-medium uppercase tracking-wider">Despl치zate</span>
            <div class="relative">
                <div class="absolute inset-0 bg-primary/20 rounded-full blur-md opacity-50"></div>
                <svg class="w-6 h-6 text-primary relative z-10 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                </svg>
            </div>
        </div>
    </div>
</section>

<script define:vars={{}}>
    // Counter animation
    function animateCounter(element) {
        if (!element) return;
        const target = parseInt(element.getAttribute('data-target') || '0');
        const suffix = element.getAttribute('data-suffix') || '';
        const duration = 2000; // 2 seconds
        const increment = target / (duration / 16); // 60fps
        let current = 0;

        const updateCounter = () => {
            current += increment;
            if (current < target) {
                const displayValue = Math.floor(current);
                element.textContent = `${displayValue}${suffix}`;
                requestAnimationFrame(updateCounter);
            } else {
                element.textContent = `${target}${suffix}`;
            }
        };

        updateCounter();
    }

    // Intersection Observer for counters
    const observerOptions = {
        threshold: 0.5,
        rootMargin: '0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counters = entry.target.querySelectorAll('.counter-value');
                counters.forEach(counter => {
                    if (!counter.hasAttribute('data-animated')) {
                        counter.setAttribute('data-animated', 'true');
                        animateCounter(counter);
                    }
                });
            }
        });
    }, observerOptions);

    // Observe the stats section
    document.addEventListener('DOMContentLoaded', () => {
        const statsSection = document.querySelector('#home');
        if (statsSection) {
            observer.observe(statsSection);
        }

        // Scroll indicator click handler
        const scrollIndicator = document.getElementById('scroll-indicator');
        if (scrollIndicator) {
            scrollIndicator.addEventListener('click', () => {
                window.scrollTo({
                    top: window.innerHeight,
                    behavior: 'smooth'
                });
            });
        }
    });
</script>
