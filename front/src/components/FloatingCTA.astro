---
---

<div id="floating-cta" class="fixed bottom-8 right-8 z-50 opacity-0 pointer-events-none transition-all duration-500 transform translate-y-10">
    <a
        href="#contact"
        data-scroll
        class="group relative flex items-center gap-3 px-6 py-4 bg-primary text-white rounded-full font-bold shadow-2xl shadow-primary/50 hover:shadow-primary/70 transition-all duration-300 hover:scale-110"
    >
        <!-- Glow effect -->
        <div class="absolute -inset-1 bg-primary rounded-full blur-md opacity-50 group-hover:opacity-75 transition-opacity"></div>
        
        <!-- Content -->
        <div class="relative z-10 flex items-center gap-3">
            <svg class="w-5 h-5 transform group-hover:rotate-12 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
            </svg>
            <span class="hidden sm:inline">Contáctame</span>
            <span class="sm:hidden">Contacto</span>
        </div>
    </a>
</div>

<script>
    const floatingCTA = document.getElementById("floating-cta");
    let lastScrollY = window.scrollY;
    let ticking = false;

    function updateCTA() {
        const scrollY = window.scrollY;
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const scrollPercentage = (scrollY / (documentHeight - windowHeight)) * 100;

        // Mostrar CTA después de 30% del scroll y ocultar en la sección de contacto
        const contactSection = document.getElementById("contact");
        const contactOffset = contactSection?.offsetTop || Infinity;
        
        if (scrollY > windowHeight * 0.3 && scrollY < contactOffset - 200) {
            floatingCTA?.classList.remove("opacity-0", "pointer-events-none", "translate-y-10");
            floatingCTA?.classList.add("opacity-100", "pointer-events-auto", "translate-y-0");
        } else {
            floatingCTA?.classList.add("opacity-0", "pointer-events-none", "translate-y-10");
            floatingCTA?.classList.remove("opacity-100", "pointer-events-auto", "translate-y-0");
        }

        lastScrollY = scrollY;
        ticking = false;
    }

    function requestTick() {
        if (!ticking) {
            window.requestAnimationFrame(updateCTA);
            ticking = true;
        }
    }

    window.addEventListener("scroll", requestTick);
    window.addEventListener("resize", requestTick);
    
    // Inicializar
    updateCTA();
</script>

<style>
    #floating-cta {
        animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }
</style>
